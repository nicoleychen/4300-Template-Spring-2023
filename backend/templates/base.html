<!DOCTYPE html>
<title>{% block title %}{% endblock %} FindMyFragrance </title>
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link
  href="https://fonts.googleapis.com/css2?family=Kanit&family=Montserrat&family=Open+Sans:wght@500&display=swap"
  rel="stylesheet"
/>
<body>
  <div class="full-body-container">
    <div class="top-text">
      <div class="findMyFragrance-title">
        <h1 id="color-pink">FindMyFragrance</h1>
      </div>
      <div>
        <div class="input-box" onclick="sendFocus()">
          <img src="{{ url_for('static', filename='images/mag.png') }}" />
          <!-- <input
          placeholder="Search for a fragrance"
          id="filter-text-val"
          style="background-color: #efe4e0"
          onkeyup="filterText()"
        /> -->
          <input
            type="text"
            placeholder="Search for a fragrance"
            id="search-text"
            style="background-color: #efe4e0; width: 400px"
          />
        </div>
        <input
          type="button"
          class="input-box"
          id="search-button"
          value="Find Fragrances"
          style="width: 150px"
        />
      </div>
    </div>
    <div id="result-box">
      <div class="result-heading" id="result-heading-text">Search results:</div>
    </div>
  </div>

  <script>
    const button = document.getElementById('search-button')
    console.log(button)
    button.addEventListener('click', returnResults)
    

    function returnResults() {
      var query = document.getElementById('search-text').value

      document.getElementById('result-heading-text').textContent =
        'Perfumes similar to "' + query + '":'

      // todo: call a backend endpoint here & pass the query to retrieve the top 3 results data and store them as 'results'
      // for now use a dummy data

    //   fetch("/similar?" + new URLSearchParams({ title: query }).toString())
    //   .then((response) => response.json())
    //   .then(results.forEach(res => {

    //     let tempDiv = document.createElement('div')
    //     tempDiv.innerHTML = resultTemplate(
    //       res.img,
    //       res.name,
    //       res.brand,
    //       res.notes,
    //       res.desc)
    //     document.getElementById('result-box').appendChild(tempDiv)
    // }));

      // pseudocode
      // fetch("/similar?" + new URLSearchParams({ title: query }).toString())
      // .then(response) => response.json())
      // .then(move the results.foreach here);
      
      // results = [
      //   {
      //     img: "{{ url_for('static', filename='images/perfume-default.png') }}",
      //     name: '00 Auriel Eau de Parfum',
      //     brand: 'Odin',
      //     notes: 'cassis, coriander, black pepper, rose, jasmine, muguet, agarwood, sandalwood, patchouli, labdanum',
      //     desc: 'No. 00 Auriel is a dark, sultry, animalic wood that balances feminine and masculine from top to bottom. At first impression, the scent opens with an assertive blend of cassis berries, herbaceous coriander and tellicherry peppercorns. The heart is a copious floral aphrodisiac of spicy rose absolute, creamy jasmin sambac and sweet muguet giving a smooth velvety texture. Auriel\'s roots of black agarwood develop on the skin with resinous warmth and richness that is undeniably provocative.'
      //   },
      //   {
      //     img: "{{ url_for('static', filename='images/perfume-default.png') }}",
      //     name: '1 Parfum Extrait',
      //     brand: 'Puredistance',
      //     notes: 'Fresh tangerine blossom, cassis, neroli bigarade, magnolia, rose wardia, jasmine, natural mimosa, sweet amber, vetiver, white musk',
      //     desc: 'One of the world\'s most exclusive fragrances, Puredistance I was created by a renowned perfumer Annie Buzantian. The story goes that this luminous green floral with a mouthwatering tease of black currant was originally Buzantian\'s own perfume... the perfumer\'s own scent sets high expectations and does not disappoint! Built on the play of the soft and the crisp, the warm and the cold, the fruity flirtiness and the floral elegance, the aroma is as complex and as polished as the most precious diamond. The citrus blossoms let the cool breeze into the luscious blend of jasmine and mimosa. The very delicate fruity accord in the top is carried on in the heart of the scent by the ever feminine note of magnolia. The graceful earthiness of vetiver in the base enhances the green quality of the blend, while musk and amber add warmth and sensuality to the dazzlingly pristine atmosphere of the composition. With its impeccable proportions and sublime, multifaceted beauty, Puredistance I is destined to become a modern class'
      //   },
      //   {
      //     img: "{{ url_for('static', filename='images/perfume-default.png') }}",
      //     name: '10 Corso Como Eau de Parfum',
      //     brand: '10 Corso Como',
      //     notes: 'sandalwood, frankincense, musk, rose, geranium, vetiver and rare Malay oud wood oil',
      //     desc: '10 Corso Como is exotic sensuality, the meeting of the arcane and the new. It\'s a clean, warm sandalwood with a touch of churchy frankincense and an ingredient so expensive, so precious, so rare that we dare not speak its name but once. This is not your local headshop\'s version of sandalwood, so forget about multi-colored dancing bears and hookahs; 10 Corso Como\'s mystery is rooted in one of the most ancient of all incenses, yet it remains light on the skin, exuding a scent both delicate and intensely spiritual. Without a single ad campaign, 10 Corso Como has attracted so many crazed worshippers in Europe that some buy the bottles by the dozen. Welcome to paradise'
      //   }
      // ]

      results = [
         {
           img: "{{ url_for('static', filename='images/perfume-default.png') }}",
           name: 'Name1',
           brand: 'Brand1',
           notes: 'notes1, notes1, notes1, notes1',
           desc: 'description1 description1 description1 description1 description1 description1 description1 description1 description1 description1 description1 description1 '
         },
         {
           img: "{{ url_for('static', filename='images/perfume-default.png') }}",
           name: 'Name2',
           brand: 'Brand2',
           notes: 'notes2, notes2, notes2',
           desc: 'description2 description2 description2 description2 description2 description2 description2 description2 description2 '
         },
         {
           img: "{{ url_for('static', filename='images/perfume-default.png') }}",
           name: 'Name3',
           brand: 'Brand3',
           notes: 'notes3, notes3, notes3, notes3, notes3',
           desc: 'description3 description3 description3 description3 description3 description3 description3 description3 '
         }
       ]

      results.forEach(res => {
         let tempDiv = document.createElement('div')
         tempDiv.innerHTML = resultTemplate(
           res.img,
           res.name,
           res.brand,
           res.notes,
           res.desc
         )
         document.getElementById('result-box').appendChild(tempDiv)
       })
    }

    function resultTemplate(img, name, brand, notes, desc) {
      return `<div class='result-card'>
                <img src=${img} class='fragrance-img'>
                <h3 class='fragrance-name'>${name} by ${brand}</h3>
                <p class='fragrance-detail'>Notes: ${notes}</p>
                <p class='fragrance-detail'>Description: ${desc}</p>
            </div>`
    }

  </script>
</body>
